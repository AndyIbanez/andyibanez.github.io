<!doctype html><html prefix="og: http://ogp.me/ns#" lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,user-scalable=no"><meta http-equiv=x-ua-compatible content="ie=edge"><script async src="https://www.googletagmanager.com/gtag/js?id=G-CE7T69YX8Y"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-CE7T69YX8Y")}</script><link rel=apple-touch-icon sizes=180x180 href=https://www.andyibanez.com/favicons/apple-touch-icon-180x180.png><link rel=icon type=image/png sizes=32x32 href=https://www.andyibanez.com/favicons/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=https://www.andyibanez.com/favicons/favicon-16x16.png><link rel=manifest href=https://www.andyibanez.com/favicons/site.webmanifest><link rel=mask-icon href=https://www.andyibanez.com/favicons/safari-pinned-tab.svg color=#292148><meta name=msapplication-TileColor content="#292148"><meta name=msapplication-config content="https://www.andyibanez.com/favicons/browserconfig.xml"><meta name=theme-color content="#292148"><link rel=canonical href=https://www.andyibanez.com/posts/recognizing-language-nllanguagerecognizer/><link rel=alternate hreflang=en href=https://www.andyibanez.com/posts/recognizing-language-nllanguagerecognizer/ title><meta name=description content="Identify the language of a body of natural language text with NLLanguageRecognizer."><meta name=author content><meta name=theme-color content="#292148"><meta itemprop=name content="Recognizing the language in a Natural Language Text with NLanguageRecognizer"><meta itemprop=description content="Identify the language of a body of natural language text with NLLanguageRecognizer."><meta itemprop=datePublished content="2020-02-19T07:00:00-04:00"><meta itemprop=dateModified content="2020-02-19T07:00:00-04:00"><meta itemprop=wordCount content="764"><meta itemprop=keywords content="swift,ios,ipados,programming,tvos,watchos,macos,natural language"><meta property="og:url" content="https://www.andyibanez.com/posts/recognizing-language-nllanguagerecognizer/"><meta property="og:site_name" content="Andy Ibanez"><meta property="og:title" content="Recognizing the language in a Natural Language Text with NLanguageRecognizer"><meta property="og:description" content="Identify the language of a body of natural language text with NLLanguageRecognizer."><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2020-02-19T07:00:00-04:00"><meta property="article:modified_time" content="2020-02-19T07:00:00-04:00"><meta property="article:tag" content="Swift"><meta property="article:tag" content="Programming"><meta property="article:tag" content="Apple"><meta property="article:tag" content="Ios"><meta property="article:tag" content="Ipados"><meta property="article:tag" content="Tvos"><meta name=twitter:card content="summary"><meta name=twitter:title content="Recognizing the language in a Natural Language Text with NLanguageRecognizer"><meta name=twitter:description content="Identify the language of a body of natural language text with NLLanguageRecognizer."><meta name=twitter:creator content="@"><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","url":"https://www.andyibanez.com/posts/recognizing-language-nllanguagerecognizer/","headline":"Recognizing the language in a Natural Language Text with NLanguageRecognizer","description":"Identify the language of a body of natural language text with NLLanguageRecognizer.","datePublished":"2020-02-19","keywords":"swift,programming,apple,ios,ipados,tvos,watchos,macos,natural language","author":{"@type":"Person","name":""}}</script><title>Recognizing the language in a Natural Language Text with NLanguageRecognizer - Andy Ibanez</title><link rel=stylesheet href=https://www.andyibanez.com/style.main.min.18f604b90ed15864d7faa967f1ef9eacb99e1c967eff38762ec29b7bf1ab5876.css><script async src="https://www.googletagmanager.com/gtag/js?id=G-CE7T69YX8Y"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-CE7T69YX8Y")}</script></head><body><div class=wrapper><nav><div class=container><div class=language-selector></div></div></nav><header><div class=container><div class=header-group><div class=header-logo-container><a class=header-logo-link href=https://www.andyibanez.com/><img class=header-logo-circle src=https://www.andyibanez.com/img/andy_profile.png alt="Andy Ibanez logo"></a></div><div class=header-title><a href=https://www.andyibanez.com/>Andy Ibanez</a></div></div></div></header><nav><div class=container><div class=main-navigation><a href=/about/>About Me</a><a href=/posts/>Blog</a><a href=/projects/>Projects</a><a href=/tags/>Tags</a><a href=/contact/>Contact</a><a href=/privacy-policy/>Privacy policy</a></div></div></nav><div class=container><div class=search><input type=text id=searchInput placeholder="Type here to search"></div><div class="container search-results-container" hidden=true><div id=searchResults class=search-results></div></div></div><main><div class=container><article><h1 class=title>Recognizing the language in a Natural Language Text with NLanguageRecognizer</h1><p class=publish>Published on
<time class=post-date datetime=2020-02-19T07:00:00-04:00>February 19, 2020</time></p><p>Continuing my trend of writing about language processing, today I want to discuss about identifying the language of a body of text. This is an interesting task we can do thanks, once again, to Apple&rsquo;s investment in APIs linked to machine learning.</p><p>Today we will explore the <a href=https://developer.apple.com/documentation/naturallanguage/nllanguagerecognizer><code>NLLanguageRecognizer</code></a> object. Introduced in iOS 12, this class can do a lot of language recognizing, from detecting the &ldquo;dominant language&rdquo; of a string, to all the possible languages.</p><h1 id=introducing-nllanguagerecognizer>Introducing NLLanguageRecognizer</h1><hr>**Important Note!**<p>Don&rsquo;t try to use one instance of this object through multiple threads.</p><hr><p>This class is actually very easy to use. It has very few methods, and the easiest task to perform is one static method away. You need to <code>import NaturalLanguage</code> to use it.</p><h2 id=quickly-recognizing-a-language-in-a-string>Quickly Recognizing a Language in a String.</h2><p>If all you need to do is to quickly recognize a language in a string, you can use the static <code>dominantLanguage(for:)</code> method. This method takes the string to recognize and returns an optional <a href=https://developer.apple.com/documentation/naturallanguage/nllanguage><code>NLLanguage</code></a> object, which contains the language itself. If the string cannot recognize a language at all, it will be nil.</p><div class=highlight><pre tabindex=0 style=color:#cdd6f4;background-color:#1e1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span><span style=color:#f38ba8>var</span> <span style=color:#f5e0dc>stringToRecognize</span> = <span style=color:#a6e3a1>&#34;This is an awesome string.&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#cba6f7>if</span> <span style=color:#f38ba8>let</span> <span style=color:#f5e0dc>lang</span> = NLLanguageRecognizer.dominantLanguage(<span style=color:#cba6f7>for</span>: stringToRecognize) {
</span></span><span style=display:flex><span>  <span style=color:#89dceb>print</span>(lang.rawValue) <span style=color:#6c7086;font-style:italic>// prints &#34;en&#34;</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>And the fun part is, because the method can return the <em>dominant</em> language, you can mix multiple languages together and it will return the one with most presence.</p><div class=highlight><pre tabindex=0 style=color:#cdd6f4;background-color:#1e1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span><span style=color:#f38ba8>var</span> <span style=color:#f5e0dc>stringToRecognize</span> = <span style=color:#a6e3a1>&#34;This is an awesome string. Cuando yo estaba por ahí en las calles decidí preguntar el significado de la vida&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#cba6f7>if</span> <span style=color:#f38ba8>let</span> <span style=color:#f5e0dc>lang</span> = NLLanguageRecognizer.dominantLanguage(<span style=color:#cba6f7>for</span>: stringToRecognize) {
</span></span><span style=display:flex><span>  <span style=color:#89dceb>print</span>(lang.rawValue) <span style=color:#6c7086;font-style:italic>// prints &#34;es&#34;</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>The above example uses a string with both English and Spanish. Because Spanish is the dominant language, it prints &ldquo;es&rdquo;.</p><h2 id=advanced-usage>Advanced Usage</h2><p>That&rsquo;s probably a bad title, because using the other features o this class is not complicated at all.</p><p>First, we can detect all the languages in a string. Although this will not be accurate all the time, an instance of this class offers the <code>languageHypotheses(withMaximum)</code> method, which tries to return all the languages found in a string. The return type is a dictionary of type <code>[NLLanguage: Double]</code>. The double is the probability of each language. The <code>withMaximum</code> parameter is the maximum number of languages to return.</p><p>To use an instance instead of the static methods of this class, you have to call the <code>processString</code> method, which takes a string and returns nothing. After you call this method, <code>NSLanguageRecognizer</code>s will have its <code>dominantLanguage</code> property filled. You will also be able to use <code>languageHypotheses(withMaximum)</code> method. Calling <code>processString</code> is essential to do anything interesting with this class. And like you are able to tell, everything happens in the same thread, so remember not to use one instance concurrently.</p><p>The following example gets all the possible languages in the string:</p><div class=highlight><pre tabindex=0 style=color:#cdd6f4;background-color:#1e1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span><span style=color:#f38ba8>var</span> <span style=color:#f5e0dc>stringToRecognize</span> = <span style=color:#a6e3a1>&#34;This is an awesome string. Cuando yo estaba por ahí en las calles decidí preguntar el significado de la vida&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f38ba8>let</span> <span style=color:#f5e0dc>langRecognizer</span> = NLLanguageRecognizer()
</span></span><span style=display:flex><span>langRecognizer.processString(stringToRecognize)
</span></span><span style=display:flex><span><span style=color:#cba6f7>for</span> (lang, perc) <span style=color:#cba6f7>in</span> langRecognizer.languageHypotheses(withMaximum: <span style=color:#fab387>10</span>) {
</span></span><span style=display:flex><span>  <span style=color:#89dceb>print</span>(<span style=color:#a6e3a1>&#34;Probability of </span><span style=color:#a6e3a1>\(</span>lang.rawValue<span style=color:#a6e3a1>)</span><span style=color:#a6e3a1>: </span><span style=color:#a6e3a1>\(</span>perc<span style=color:#a6e3a1>)</span><span style=color:#a6e3a1>&#34;</span>)
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>It will output something like the following:</p><div class=highlight><pre tabindex=0 style=color:#cdd6f4;background-color:#1e1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span>Probability of de: <span style=color:#fab387>0.0011527120368555188</span>
</span></span><span style=display:flex><span>Probability of sk: <span style=color:#fab387>0.0013781085144728422</span>
</span></span><span style=display:flex><span>Probability of hu: <span style=color:#fab387>0.001778516685590148</span>
</span></span><span style=display:flex><span>Probability of it: <span style=color:#fab387>0.003761883592233062</span>
</span></span><span style=display:flex><span>Probability of pt: <span style=color:#fab387>0.01308358833193779</span>
</span></span><span style=display:flex><span>Probability of nl: <span style=color:#fab387>0.0018757604993879795</span>
</span></span><span style=display:flex><span>Probability of ro: <span style=color:#fab387>0.0038427249528467655</span>
</span></span><span style=display:flex><span>Probability of hr: <span style=color:#fab387>0.0007617694209329784</span>
</span></span><span style=display:flex><span>Probability of en: <span style=color:#fab387>0.09818074852228165</span>
</span></span><span style=display:flex><span>Probability of es: <span style=color:#fab387>0.8707313537597656</span>
</span></span></code></pre></div><p>You should try to give the <code>withMaximum</code> parameter a more reasonable value if you have any idea of what the dominant languages are going to be. We can observe that English and Spanish have the bigger percentages.</p><p>You can also guide the recognizer by specifying the <code>languageHints</code> and <code>languageConstraints</code> properties. I wasn&rsquo;t able to find much use for <code>languageHints</code> because it takes a dictionary similar to the one returned by <code>languageHypotheses(withMaxium:)</code>, but by using <code>languageConstraints</code> you can limit the languages you want to recognize.</p><p>If we add the following code to the piece of code above</p><div class=highlight><pre tabindex=0 style=color:#cdd6f4;background-color:#1e1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span>langRecognizer.languageConstraints = [.english, .spanish]
</span></span></code></pre></div><p>It will print:</p><pre tabindex=0><code>Probability of es: 0.8986690044403076
Probability of fr: 0.0
Probability of hr: 0.0
Probability of da: 0.0
Probability of en: 0.10133091360330582
Probability of cs: 0.0
Probability of fi: 0.0
Probability of de: 0.0
Probability of hu: 0.0
</code></pre><p>And it would be good to assign <code>withMaxium</code> to <code>2</code> here, as we know we only want to recognize two languages.</p><h1 id=conclusion>Conclusion</h1><p>Recognizing a language in iOS is as easy as using the <code>NLLanguageRecognizer</code> API introduced in iOS 12 and calling a few lines of code. The system will do its best to determine the dominant language or all the possible languages in a string, and you can use this information for natural-language apps.</p></article></div></main><footer><div class=container><div class=footer-navigation><a href=https://github.com/AndyIbanez><span class=inline-svg><svg viewBox="0 0 42 40" id="svg4" width="42" height="40"><path fill="currentColor" d="m14.20936 32.20794c0 .16542-.19024.29776-.4301.29776-.27295.0248-.46319-.10752-.46319-.29776.0-.16542.19024-.29776.4301-.29776.24814-.0248.46319.10752.46319.29776zm-2.57234-.3722c-.0579.16542.10753.35566.35566.40528.21505.0827.46319.0.51282-.16542.0496-.16542-.10753-.35566-.35566-.4301-.21505-.0579-.45492.0248-.51282.19024zm3.65586-.14061c-.23986.0579-.40529.21505-.38047.40528.0248.16543.23986.27295.488.21505.23986-.0579.40528-.21505.38047-.38047-.0248-.15715-.24813-.26468-.488-.23986zM20.73531-.19734273e-6C9.2632-.19734273e-6.48748 8.7095398.48748 20.18166c0 9.17273 5.77328 17.02207 14.01964 19.78464 1.05871.19024 1.43091-.46319 1.43091-1.00081.0-.51282-.0248-3.34156-.0248-5.0785.0.0-5.78982 1.24067-7.00568-2.46481.0.0-.94292-2.40691-2.29939-3.02725.0.0-1.8941-1.29857.13234-1.27376.0.0 2.05952.16542 3.19267 2.13396 1.81139 3.19267 4.84691 2.27457 6.02969 1.72868.19023-1.32339.72786-2.24149 1.32338-2.78739-4.62358-.51281-9.28852-1.18278-9.28852-9.13964.0-2.27458.62861-3.416 1.95199-4.87172-.21505-.53763-.9181-2.7543.21506-5.6161302 1.72867-.53762 5.7071 2.2332202 5.7071 2.2332202 1.65424-.46319 3.43254-.70305 5.1943-.70305 1.76176.0 3.54006.23986 5.1943.70305.0.0 3.97843-2.7791202 5.7071-2.2332202 1.13315 2.8701002.4301 5.0785002.21505 5.6161302 1.32339 1.46399 2.13397 2.60542 2.13397 4.87172.0 7.98168-4.87172 8.61856-9.49531 9.13964.76095.65342 1.4061 1.8941 1.4061 3.83782.0 2.78739-.0248 6.23647-.0248 6.9147.0.53763.38047 1.19105 1.43091 1.00082 8.27117-2.74603 13.87903-10.59537 13.87903-19.7681C41.51252 8.7095398 32.20745-.19734273e-6 20.73533-.19734273e-6zM8.52706 28.52727c-.10752.0827-.0827.27295.0579.4301.13234.13234.32258.19024.4301.0827.10753-.0827.0827-.27295-.0579-.4301-.13233-.13234-.32257-.19024-.4301-.0827zM7.63378 27.8573c-.0579.10753.0248.23987.19023.32258.13234.0827.29777.0579.35566-.0579C8.23757 28.01446 8.15487 27.88212 7.98944 27.7994 7.82401 27.7498 7.69168 27.7746 7.63378 27.8573zm2.67986 2.94454c-.13234.10753-.0827.35566.10752.51281.19024.19024.4301.21505.53763.0827.10752-.10752.0579-.35566-.10753-.51281-.18196-.19024-.4301-.21505-.53762-.0827zM9.37072 29.58598c-.13234.0827-.13234.29776.0.488.13234.19023.35566.27295.46319.19023.13234-.10752.13234-.32257.0-.51281-.1158-.19024-.33085-.27295-.46319-.16542z" id="path2" style="stroke-width:.08271171"/></svg>
</span></a><a href=https://x.com/AndyIbanezK><span class=inline-svg><svg viewBox="0 0 50 40" id="svg4" width="50" height="40"><path fill="currentColor" d="m44.56253 9.96871c.0313.43748.0313.87506.0313 1.31254C44.59383 24.62494 34.43764 40 15.87508 40 10.1563 40 4.84383 38.34368.37506 35.4688c.81253.0937 1.5937.12495 2.4375.12495 4.71867.0 9.06249-1.5937 12.53125-4.31245-4.43751-.0938-8.15627-3.00003-9.43754-7.00006.62505.0937 1.25001.15622 1.90632.15622.90622.0 1.81254-.12505 2.65624-.34369C5.84384 23.15619 2.37498 19.09373 2.37498 14.18748v-.12495c1.3437.75 2.90633 1.21875 4.56246 1.28117-2.71876-1.81253-4.49993-4.90624-4.49993-8.40627.0-1.87497.4999-3.59372 1.37496-5.09373 4.96877 6.125 12.43756 10.12493 20.81248 10.56251-.15622-.75001-.25-1.53118-.25-2.31245C24.37495 4.5312 28.87498.0 34.46871.0c2.90623.0 5.53121 1.21875 7.37501 3.1875 2.28118-.43748 4.46867-1.28127 6.40626-2.43749-.75011 2.3438-2.34381 4.31255-4.43751 5.56246 2.03127-.21864 4.00003-.78126 5.81247-1.56244-1.37477 1.99992-3.09362 3.7811-5.06237 5.21868z" id="path2" style="stroke-width:.09619153"/></svg>
</span></a><a href=https://www.linkedin.com/in/andyibanez/><span class=inline-svg><svg viewBox="0 0 41 40" id="svg4" width="41" height="40"><path fill="currentColor" d="M9.45332 40H1.16028V13.29405H9.45332zM5.30234 9.65111c-2.65185.0-4.80279-2.19648-4.80279-4.84832a4.80279 4.80279.0 019.60558.0c0 2.65184-2.15184 4.84832-4.80279 4.84832zM40.49152 40H32.21633V26.99971c0-3.09828-.0625-7.07159-4.3117-7.07159-4.3117.0-4.97243 3.36615-4.97243 6.84837V40H14.64808V13.29405h7.95375v3.64294h.11608c1.10716-2.09827 3.81169-4.3126 7.8466-4.3126 8.39304.0 9.93594 5.52691 9.93594 12.70564V40z" id="path2" style="stroke-width:.08928771"/></svg>
</span></a><a href=https://www.andyibanez.com/posts/index.xml><span class=inline-svg><svg viewBox="0 0 40 40" id="svg4" width="40" height="40"><path fill="currentColor" d="m11.435816 34.282008c0 3.15793-2.5599899 5.71793-5.7179299 5.71793s-5.717840022654-2.56-5.717840022654-5.71793c0-3.15794 2.559990022654-5.71793 5.717930022654-5.71793s5.7178399 2.56008 5.7178399 5.71793zm15.68388 4.21873C26.373806 24.697208 15.317496 13.626978 1.4992361 12.880288.68361608 12.836188.46077346e-4 13.491538.46077346e-4 14.308318v4.29186c0 .75134.579460002654 1.38142 1.329190022654 1.43017 9.9849699.65036 17.9886099 8.63408 18.6402999 18.6403.0488.74973.67893 1.3292 1.43018 1.3292h4.29186c.81687 9e-5 1.47223-.68348 1.42812-1.49911zm12.87933.0257C39.249566 17.649718 22.452206.754048 1.4735261.00092799867.66727608-.027972.46077346e-4.623338.46077346e-4 1.430038v4.29177c0 .77008.610270002654 1.39687 1.379730022654 1.42848 17.0694999.6999 30.7701699 14.40316 31.4699899 31.46999.0315.76946.6583 1.37972 1.42848 1.37972h4.29177c.8066-8e-5 1.45794-.66731 1.42901-1.47356z" id="path2" style="stroke-width:.08928544"/></svg>
</span></a><a href=https://www.andyibanez.com/contact><span class=inline-svg><svg viewBox="0 0 40 40" id="svg4" width="40" height="40"><path fill="currentColor" d="m39.99999 36.249999c0 2.0711-1.6789 3.75-3.74999 3.75H3.75c-2.07109.0-3.74999-1.6789-3.74999-3.75v-20.56843a3.7499996 3.7499996.0 011.43648-2.95125c1.94633-1.5257 3.55476-2.7628904 12.82812-9.4930404C15.57906 2.2789186 18.18727-.02709136 20 .00024864227 21.81234-.02745136 24.42156 2.2793086 25.73539 3.2371986c9.27242 6.72945 10.88304 7.9683604 12.82812 9.4931204a3.7499996 3.7499996.0 011.43648 2.95125zm-5.13015-15.35976c-.20024-.29125-.60156-.35898-.88586-.14898-1.78476 1.3182-4.33297 3.18008-8.24859 6.02179-1.31445.95828-3.92266 3.26414-5.73539 3.23672-1.81336.0269-4.41867-2.2768-5.73539-3.23672-3.91515-2.8414-6.46359-4.70343-8.24859-6.02179-.2843-.21-.68562-.14227-.88586.14898l-.70875 1.03094a.62484368.62484368.0 00.14367.8568c1.78805 1.32023 4.33235 3.1789 8.2268 6.00531 1.5839 1.15476 4.41593 3.73539 7.20812 3.71664 2.79094.0189 5.62195-2.56024 7.20804-3.71664 3.89453-2.82649 6.43891-4.68516 8.2268-6.00531a.62484368.62484368.0 00.14367-.8568z" id="path2" style="stroke-width:.07812498"/></svg></span></a></div></div><p class=made-with-love><a href=https://github.com/humrochagf/colordrop><b>Colordrop</b>
</a><span>theme | Made </span><span>by</span>
<a href=https://humberto.io/><b>Humberto Rocha</b></a></p></footer></div><script src=/copy/copy.js></script><script src=/search/elasticlunr.min.js></script><script src=/search/search.js></script><script>loadSearch("https://www.andyibanez.com/index.json")</script></body></html>