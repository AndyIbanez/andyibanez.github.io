<!doctype html><html prefix="og: http://ogp.me/ns#" lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,user-scalable=no"><meta http-equiv=x-ua-compatible content="ie=edge"><script async src="https://www.googletagmanager.com/gtag/js?id=G-CE7T69YX8Y"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-CE7T69YX8Y")}</script><link rel=apple-touch-icon sizes=180x180 href=https://www.andyibanez.com/favicons/apple-touch-icon-180x180.png><link rel=icon type=image/png sizes=32x32 href=https://www.andyibanez.com/favicons/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=https://www.andyibanez.com/favicons/favicon-16x16.png><link rel=manifest href=https://www.andyibanez.com/favicons/site.webmanifest><link rel=mask-icon href=https://www.andyibanez.com/favicons/safari-pinned-tab.svg color=#292148><meta name=msapplication-TileColor content="#292148"><meta name=msapplication-config content="https://www.andyibanez.com/favicons/browserconfig.xml"><meta name=theme-color content="#292148"><link rel=canonical href=https://www.andyibanez.com/posts/understanding-keypaths-swift/><link rel=alternate hreflang=en href=https://www.andyibanez.com/posts/understanding-keypaths-swift/ title><meta name=description content="Learn what KeyPaths are and how to use them in Swift."><meta name=author content><meta name=theme-color content="#292148"><meta itemprop=name content="Understanding KeyPaths in Swift"><meta itemprop=description content="Learn what KeyPaths are and how to use them in Swift."><meta itemprop=datePublished content="2020-11-11T07:00:00-04:00"><meta itemprop=dateModified content="2020-11-11T07:00:00-04:00"><meta itemprop=wordCount content="1495"><meta itemprop=keywords content="swift,programming,apple,keypaths"><meta property="og:url" content="https://www.andyibanez.com/posts/understanding-keypaths-swift/"><meta property="og:site_name" content="Andy Ibanez"><meta property="og:title" content="Understanding KeyPaths in Swift"><meta property="og:description" content="Learn what KeyPaths are and how to use them in Swift."><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2020-11-11T07:00:00-04:00"><meta property="article:modified_time" content="2020-11-11T07:00:00-04:00"><meta property="article:tag" content="Swift"><meta property="article:tag" content="Programming"><meta property="article:tag" content="Apple"><meta property="article:tag" content="Keypaths"><meta name=twitter:card content="summary"><meta name=twitter:title content="Understanding KeyPaths in Swift"><meta name=twitter:description content="Learn what KeyPaths are and how to use them in Swift."><meta name=twitter:creator content="@"><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","url":"https://www.andyibanez.com/posts/understanding-keypaths-swift/","headline":"Understanding KeyPaths in Swift","description":"Learn what KeyPaths are and how to use them in Swift.","datePublished":"2020-11-11","keywords":"swift,programming,apple,keypaths","author":{"@type":"Person","name":""}}</script><title>Understanding KeyPaths in Swift - Andy Ibanez</title><link rel=stylesheet href=https://www.andyibanez.com/style.main.min.18f604b90ed15864d7faa967f1ef9eacb99e1c967eff38762ec29b7bf1ab5876.css><script async src="https://www.googletagmanager.com/gtag/js?id=G-CE7T69YX8Y"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-CE7T69YX8Y")}</script></head><body><div class=wrapper><nav><div class=container><div class=language-selector></div></div></nav><header><div class=container><div class=header-group><div class=header-logo-container><a class=header-logo-link href=https://www.andyibanez.com/><img class=header-logo-circle src=https://www.andyibanez.com/img/andy_profile.png alt="Andy Ibanez logo"></a></div><div class=header-title><a href=https://www.andyibanez.com/>Andy Ibanez</a></div></div></div></header><nav><div class=container><div class=main-navigation><a href=/about/>About Me</a><a href=/posts/>Blog</a><a href=/projects/>Projects</a><a href=/tags/>Tags</a><a href=/contact/>Contact</a><a href=/privacy-policy/>Privacy policy</a></div></div></nav><div class=container><div class=search><input type=text id=searchInput placeholder="Type here to search"></div><div class="container search-results-container" hidden=true><div id=searchResults class=search-results></div></div></div><main><div class=container><article><h1 class=title>Understanding KeyPaths in Swift</h1><p class=publish>Published on
<time class=post-date datetime=2020-11-11T07:00:00-04:00>November 11, 2020</time></p><p>KeyPath. It sounds like a very fancy word. And it is a feature you have likely used it, either knowingly or unknowingly. KeyPaths are one of my favorite features in Swift, but they can be a bit tricky to understand. In this article we will explore what KeyPaths are, and when you may want to use them.</p><h1 id=understanding-keypaths>Understanding KeyPaths</h1><p>In simple words, a KeyPath is a reference to an actual property instead of a value.</p><h2 id=keypaths-basics>KeyPaths basics.</h2><p>As we said above, KeyPath is a reference to a property instead of a value. If you can&rsquo;t wrap your head around this concepts, imagine a normal variable pointing to a normal value, such as:</p><div class=highlight><pre tabindex=0 style=color:#cdd6f4;background-color:#1e1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span><span style=color:#f38ba8>let</span> <span style=color:#f5e0dc>dollName</span> = <span style=color:#a6e3a1>&#34;Classical Alice&#34;</span>
</span></span></code></pre></div><p>The variable points to a <em>value</em>, and we can access that value anytime by just writing the variable name.</p><div class=highlight><pre tabindex=0 style=color:#cdd6f4;background-color:#1e1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span><span style=color:#f38ba8>let</span> <span style=color:#f5e0dc>completeDollName</span> = <span style=color:#a6e3a1>&#34;Pullip </span><span style=color:#a6e3a1>\(</span>dollName<span style=color:#a6e3a1>)</span><span style=color:#a6e3a1>&#34;</span>
</span></span></code></pre></div><p>Everytime we write <code>dollName</code>, we are getting the <em>value</em> stored by that property.</p><p>Opposite to that, KeyPaths can hold a property itself.</p><p>KeyPaths point to properties in an object, so to show you how to create and use them, we will create a <code>Doll</code> object with three basic properties.</p><div class=highlight><pre tabindex=0 style=color:#cdd6f4;background-color:#1e1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span><span style=color:#f38ba8>class</span> <span style=color:#f9e2af>Doll</span> {
</span></span><span style=display:flex><span>  <span style=color:#f38ba8>let</span> <span style=color:#f5e0dc>maker</span>: <span style=color:#89dceb>String</span>
</span></span><span style=display:flex><span>  <span style=color:#f38ba8>let</span> <span style=color:#f5e0dc>name</span>: <span style=color:#89dceb>String</span>
</span></span><span style=display:flex><span>  <span style=color:#f38ba8>let</span> <span style=color:#f5e0dc>releaseYear</span>: <span style=color:#89dceb>Int</span>
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#f38ba8>init</span>(name: <span style=color:#89dceb>String</span>, maker: <span style=color:#89dceb>String</span>, releaseYear: <span style=color:#89dceb>Int</span>) {
</span></span><span style=display:flex><span>    <span style=color:#fab387>self</span>.name = name
</span></span><span style=display:flex><span>    <span style=color:#fab387>self</span>.maker = maker
</span></span><span style=display:flex><span>    <span style=color:#fab387>self</span>.releaseYear = releaseYear
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f38ba8>let</span> <span style=color:#f5e0dc>classAlice</span> = Doll(name: <span style=color:#a6e3a1>&#34;Classical Alice&#34;</span>, maker: <span style=color:#a6e3a1>&#34;Groove&#34;</span>, releaseYear: <span style=color:#fab387>2013</span>)
</span></span></code></pre></div><p>When we are referencing a KeyPath, we start with a backwards slash <code>\</code>, followed by the definition of the object (the class or struct name), followed by the property we want to &ldquo;point&rdquo; to.</p><div class=highlight><pre tabindex=0 style=color:#cdd6f4;background-color:#1e1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span><span style=color:#f38ba8>let</span> <span style=color:#f5e0dc>dollMaker</span> = <span style=color:#f38ba8>\</span>Doll.maker
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#89dceb>print</span>(dollMaker)
</span></span></code></pre></div><p><code>\Doll.maker</code> gives as a reference to the <code>maker</code> property of <code>Doll</code>. If you print <code>dollMaker</code>, Swift will print some weird meta info about the object, but that&rsquo;s OK - A KeyPath is a reference to a property! And you should not expect it to return a value directly.</p><p>By the time you do want to get a value when you have a KeyPath, the <code>keyPath</code> will help you do just that.</p><div class=highlight><pre tabindex=0 style=color:#cdd6f4;background-color:#1e1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span><span style=color:#f38ba8>let</span> <span style=color:#f5e0dc>dollMaker</span> = <span style=color:#f38ba8>\</span>Doll.maker
</span></span><span style=display:flex><span><span style=color:#f38ba8>let</span> <span style=color:#f5e0dc>aliceMaker</span> = classAlice[keyPath: dollMaker]
</span></span><span style=display:flex><span><span style=color:#89dceb>print</span>(aliceMaker) <span style=color:#6c7086;font-style:italic>// Pullip</span>
</span></span></code></pre></div><p>When using KeyPaths within an object definition itself, you can omit the definition name, like this:</p><div class=highlight><pre tabindex=0 style=color:#cdd6f4;background-color:#1e1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span><span style=color:#f38ba8>class</span> <span style=color:#f9e2af>Doll</span> {
</span></span><span style=display:flex><span>  <span style=color:#6c7086;font-style:italic>//...</span>
</span></span><span style=display:flex><span>  <span style=color:#f38ba8>func</span> <span style=color:#89b4fa>getMaker</span>() -&gt; <span style=color:#89dceb>String</span> {
</span></span><span style=display:flex><span>    <span style=color:#cba6f7>return</span> <span style=color:#fab387>self</span>[keyPath: <span style=color:#f38ba8>\</span>.maker]
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=the-usefulness-of-keypaths>The Usefulness of KeyPaths</h2><p>I can hear some of you rumbling in the back, wondering why in the heck would this ever be useful to anyone. There&rsquo;s a few reasons for this.</p><p>First, KeyPaths are actually nothing new. They are used all over Apple&rsquo;s frameworks, and all Swift actually did was to provide a much better syntax for dealing with KeyPaths. Objective-C does support KeyPaths, but they are provided as strings when you need them, and this is error prone. In the beginning, Swift actually ported this mechanism directly, but through the process of its evolution, Swift arrive at this new syntax which won&rsquo;t let you introduce bugs based on simple typos when writing a KeyPath.</p><p>If you have played with SwiftUI, you have likely seen the <code>ForEach</code> and <code>List</code> views. These views expect an <code>Identifiable</code> object, but when you don&rsquo;t have them, you can provide a KeyPath to tell them what property to use to consider your data source as unique.</p><div class=highlight><pre tabindex=0 style=color:#cdd6f4;background-color:#1e1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span><span style=color:#f38ba8>let</span> <span style=color:#f5e0dc>dollArray</span> = [classAlice, eileen, delia]
</span></span><span style=display:flex><span>ForEach(dollArray, id: <span style=color:#f38ba8>\</span>.name) {
</span></span><span style=display:flex><span>	<span style=color:#6c7086;font-style:italic>// Do something with each doll</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p><code>ForEach</code> and <code>List</code> operate on unique data and they have internal optimizations to do their work. If our views are not <code>Identifiable</code>, we have a way to tell them to treat a property as unique. We do with KeyPaths. We are providing them with the <code>Doll.name</code> KeyPath and the views will assume the doll names are the unique property for each model. There is no other way to &ldquo;explain&rdquo; <code>ForEach</code> what property it should use to look for uniqueness.</p><p>KeyPaths are very powerful if you know how to use them.</p><p>Second, KeyPaths enable us to do what&rsquo;s called <em>metaprogramming</em>. Metaprogramming is a concept in which a program uses another program as its data. When it comes to KeyPaths, our apps themselves <em>are</em> their own data. This funky concept opens a lot of doors, and the best thing is, in Swift, it does in a very safe manner. Metaprogramming in Objective-C through KeyPaths is very possible, but as we said above, it doesn&rsquo;t have specialized <code>KeyPath</code> types, but rather it just uses KeyPaths as strings.</p><p>One more important thing before we move in, <code>KeyPaths</code> can reference properties nested deeply in other objects. Consider the following example:</p><div class=highlight><pre tabindex=0 style=color:#cdd6f4;background-color:#1e1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span><span style=color:#f38ba8>class</span> <span style=color:#f9e2af>Maker</span> {
</span></span><span style=display:flex><span>  <span style=color:#f38ba8>let</span> <span style=color:#f5e0dc>name</span>: <span style=color:#89dceb>String</span>
</span></span><span style=display:flex><span>  <span style=color:#f38ba8>let</span> <span style=color:#f5e0dc>fundedYear</span>: <span style=color:#89dceb>Int</span>
</span></span><span style=display:flex><span>  <span style=color:#f38ba8>let</span> <span style=color:#f5e0dc>producedDolls</span>: <span style=color:#89dceb>Int</span>
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#f38ba8>init</span>(name: <span style=color:#89dceb>String</span>, fundedYear: <span style=color:#89dceb>Int</span>, producedDolls: <span style=color:#89dceb>Int</span>) {
</span></span><span style=display:flex><span>    <span style=color:#fab387>self</span>.name = name
</span></span><span style=display:flex><span>    <span style=color:#fab387>self</span>.fundedYear = fundedYear
</span></span><span style=display:flex><span>    <span style=color:#fab387>self</span>.producedDolls = producedDolls
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f38ba8>class</span> <span style=color:#f9e2af>Doll2</span> {
</span></span><span style=display:flex><span>  <span style=color:#f38ba8>let</span> <span style=color:#f5e0dc>maker</span>: Maker
</span></span><span style=display:flex><span>  <span style=color:#f38ba8>let</span> <span style=color:#f5e0dc>name</span>: <span style=color:#89dceb>String</span>
</span></span><span style=display:flex><span>  <span style=color:#f38ba8>let</span> <span style=color:#f5e0dc>releaseYear</span>: <span style=color:#89dceb>Int</span>
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#f38ba8>init</span>(name: <span style=color:#89dceb>String</span>, maker: Maker, releaseYear: <span style=color:#89dceb>Int</span>) {
</span></span><span style=display:flex><span>    <span style=color:#fab387>self</span>.name = name
</span></span><span style=display:flex><span>    <span style=color:#fab387>self</span>.maker = maker
</span></span><span style=display:flex><span>    <span style=color:#fab387>self</span>.releaseYear = releaseYear
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f38ba8>let</span> <span style=color:#f5e0dc>groove</span> = Maker(name: <span style=color:#a6e3a1>&#34;Groove&#34;</span>, fundedYear: <span style=color:#fab387>2004</span>, producedDolls: <span style=color:#fab387>100</span>)
</span></span><span style=display:flex><span><span style=color:#f38ba8>let</span> <span style=color:#f5e0dc>alice2</span> = Doll2(name: <span style=color:#a6e3a1>&#34;Classical Alice&#34;</span>, maker: groove, releaseYear: <span style=color:#fab387>2013</span>)
</span></span></code></pre></div><p>We have created a new <code>Maker</code> object, so each doll will reference the company that created them.</p><p>Now, consider the following KeyPaths:</p><div class=highlight><pre tabindex=0 style=color:#cdd6f4;background-color:#1e1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span><span style=color:#f38ba8>let</span> <span style=color:#f5e0dc>dollMakerFundedYearKeyPath</span> = <span style=color:#f38ba8>\</span>Doll2.maker.fundedYear
</span></span><span style=display:flex><span><span style=color:#f38ba8>let</span> <span style=color:#f5e0dc>makerFundedKeyPath</span> = <span style=color:#f38ba8>\</span>Maker.fundedYear
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f38ba8>let</span> <span style=color:#f5e0dc>fundedYear</span> = alice2[keyPath: dollMakerFundedYearKeyPath]
</span></span><span style=display:flex><span><span style=color:#f38ba8>let</span> <span style=color:#f5e0dc>fundedYear2</span> = alice2[keyPath: makerFundedKeyPath]
</span></span></code></pre></div><p>It&rsquo;s very important to keep in mind that <code>Doll2.maker.fundedYear</code>, and <code>\Maker.fundedYear</code> may look like they are pointing at the same property, they are not. These KeyPaths are entirely different, and they point to different things. Namely, the former points to a <code>maker.fundedYear</code> property, whereas the latter points simply to a <code>fundedYear</code>. KeyPaths are&mldr; Paths. Each period digs deeper in a property hierarchy, and it can become quite lengthy.</p><p>The neat thing about Swift is that the code above won&rsquo;t even compile. Because <code>Doll</code> doesn&rsquo;t have a <code>fundedYear</code> property, the compiler will catch the warning and it will stop you from introducing interesting bugs (looking at you, Objective-C).</p><h2 id=passing-keypaths-around>Passing KeyPaths Around</h2><p>If you have tried to print a KeyPath directly, you have seen the console print something like this:</p><div class=highlight><pre tabindex=0 style=color:#cdd6f4;background-color:#1e1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span>Swift.KeyPath&lt;__lldb_expr_15.Doll2, Swift.<span style=color:#89dceb>Int</span>&gt;
</span></span><span style=display:flex><span>Swift.KeyPath&lt;__lldb_expr_15.Maker, Swift.<span style=color:#89dceb>Int</span>&gt;
</span></span><span style=display:flex><span>Swift.KeyPath&lt;__lldb_expr_15.Doll, Swift.<span style=color:#89dceb>String</span>&gt;
</span></span></code></pre></div><p>When dealing with KeyPaths, we have a literal object called <code>KeyPath</code> - There&rsquo;s a few more variations of KeyPaths, but we will explore them in a future article.</p><p>First we are going to explore an example that is not very useful in the real world, but it should help you get the hang of KeyPaths and why they are useful.</p><p>The following function takes a <code>Doll2</code>, and returns the value of any <code>String</code> property you want.</p><div class=highlight><pre tabindex=0 style=color:#cdd6f4;background-color:#1e1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span><span style=color:#f38ba8>func</span> <span style=color:#89b4fa>getPropertyValue</span>(<span style=color:#cba6f7>in</span> doll: Doll2, keyPath: KeyPath&lt;Doll2, <span style=color:#89dceb>String</span>&gt;) -&gt; <span style=color:#89dceb>String</span> {
</span></span><span style=display:flex><span>  <span style=color:#cba6f7>return</span> doll[keyPath: keyPath]
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#6c7086;font-style:italic>//...</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f38ba8>let</span> <span style=color:#f5e0dc>groove</span> = Maker(name: <span style=color:#a6e3a1>&#34;Groove&#34;</span>, fundedYear: <span style=color:#fab387>2004</span>, producedDolls: <span style=color:#fab387>100</span>)
</span></span><span style=display:flex><span><span style=color:#f38ba8>let</span> <span style=color:#f5e0dc>alice2</span> = Doll2(name: <span style=color:#a6e3a1>&#34;Classical Alice&#34;</span>, maker: groove, releaseYear: <span style=color:#fab387>2013</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#89dceb>print</span>(getPropertyValue(<span style=color:#cba6f7>in</span>: alice2, keyPath: <span style=color:#f38ba8>\</span>.name)) <span style=color:#6c7086;font-style:italic>// Classical Alice</span>
</span></span><span style=display:flex><span><span style=color:#89dceb>print</span>(getPropertyValue(<span style=color:#cba6f7>in</span>: alice2, keyPath: <span style=color:#f38ba8>\</span>.maker.name)) <span style=color:#6c7086;font-style:italic>// Groove</span>
</span></span></code></pre></div><p>We can make this slightly more interesting, by adding generics and therefore being able to get the value of any property we want.</p><div class=highlight><pre tabindex=0 style=color:#cdd6f4;background-color:#1e1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span><span style=color:#f38ba8>func</span> <span style=color:#89b4fa>getPropertyValue</span>&lt;Value&gt;(<span style=color:#cba6f7>in</span> doll: Doll2, keyPath: KeyPath&lt;Doll2, Value&gt;) -&gt; Value {
</span></span><span style=display:flex><span>  <span style=color:#cba6f7>return</span> doll[keyPath: keyPath]
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#89dceb>print</span>(getPropertyValue(<span style=color:#cba6f7>in</span>: alice2, keyPath: <span style=color:#f38ba8>\</span>.releaseYear)) <span style=color:#6c7086;font-style:italic>// 2013</span>
</span></span><span style=display:flex><span><span style=color:#89dceb>print</span>(getPropertyValue(<span style=color:#cba6f7>in</span>: alice2, keyPath: <span style=color:#f38ba8>\</span>.maker.fundedYear)) <span style=color:#6c7086;font-style:italic>// 2004</span>
</span></span></code></pre></div><p>Let&rsquo;s make a slightly more interesting example. While this example is not hard to recreate it with the usual high-order functions directly, I deliberately chose this one to show you how powerful KeyPaths are, and how dynamic the code you write can become.</p><div class=highlight><pre tabindex=0 style=color:#cdd6f4;background-color:#1e1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span><span style=color:#f38ba8>extension</span> <span style=color:#f9e2af>Array</span> <span style=color:#cba6f7>where</span> Element: Doll2 {
</span></span><span style=display:flex><span>  <span style=color:#f38ba8>func</span> <span style=color:#89b4fa>filtered</span>&lt;Value: <span style=color:#89dceb>Equatable</span>&gt;(by keyPath: KeyPath&lt;Element, Value&gt;, value: Value) -&gt; [Element] {
</span></span><span style=display:flex><span>    <span style=color:#cba6f7>return</span> <span style=color:#89dceb>Array</span>(<span style=color:#89dceb>filter</span> { <span style=color:#f5e0dc>$0</span>[keyPath: keyPath] == value })
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>This looks like a mouthful. A quick explanation is in order.</p><p>We are creating an extension that will apply to <code>Array</code> objects that contain <code>Doll2</code> objects. This extension has a <code>filtered(by:value)</code> function. This function will filter an array based on a KeyPath and its value, so if we want to keep all the dolls whose maker is <code>Groove</code>, it can do that. We use a generic called <code>Value</code> that conforms to equatable - in other words, values that can be compared, such as Strings, Ints, or anything else that can use <code>==</code> to compare amongst two instances of their own kind. Within the function we grab the KeyPath and compare it to the expected value.</p><p>When we want to filter <code>Doll2</code> arrays, we can call this as so:</p><div class=highlight><pre tabindex=0 style=color:#cdd6f4;background-color:#1e1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span><span style=color:#f38ba8>let</span> <span style=color:#f5e0dc>grooveMaker</span> = Maker(name: <span style=color:#a6e3a1>&#34;Groove&#34;</span>, fundedYear: <span style=color:#fab387>2004</span>, producedDolls: <span style=color:#fab387>100</span>)
</span></span><span style=display:flex><span><span style=color:#f38ba8>let</span> <span style=color:#f5e0dc>myouMaker</span> = Maker(name: <span style=color:#a6e3a1>&#34;Myou&#34;</span>, fundedYear: <span style=color:#fab387>2012</span>, producedDolls: <span style=color:#fab387>50</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f38ba8>let</span> <span style=color:#f5e0dc>classAlice</span> = Doll2(name: <span style=color:#a6e3a1>&#34;Classical Alice&#34;</span>, maker: grooveMaker, releaseYear: <span style=color:#fab387>2013</span>)
</span></span><span style=display:flex><span><span style=color:#f38ba8>let</span> <span style=color:#f5e0dc>eileen</span> = Doll2(name: <span style=color:#a6e3a1>&#34;Eileen&#34;</span>, maker: grooveMaker, releaseYear: <span style=color:#fab387>2018</span>)
</span></span><span style=display:flex><span><span style=color:#f38ba8>let</span> <span style=color:#f5e0dc>delia</span> = Doll2(name: <span style=color:#a6e3a1>&#34;Delia&#34;</span>, maker: myouMaker, releaseYear: <span style=color:#fab387>2016</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f38ba8>let</span> <span style=color:#f5e0dc>dolls</span> = [classAlice, eileen, delia]
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f38ba8>let</span> <span style=color:#f5e0dc>onlyGrooveDolls</span> = dolls.filtered(by: <span style=color:#f38ba8>\</span>.maker.name, value: <span style=color:#a6e3a1>&#34;Groove&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>onlyGrooveDolls.forEach { <span style=color:#89dceb>print</span>(<span style=color:#f5e0dc>$0</span>.name) }
</span></span><span style=display:flex><span><span style=color:#6c7086;font-style:italic>// Prints:</span>
</span></span><span style=display:flex><span><span style=color:#6c7086;font-style:italic>// Classical Alice</span>
</span></span><span style=display:flex><span><span style=color:#6c7086;font-style:italic>// Eileen</span>
</span></span></code></pre></div><h1 id=conclusion>Conclusion</h1><p>KeyPaths open a lot of doors for us. By leveraging metaprogramming, we can write highly dynamic code. With Swift, this code is dynamic without sacrificing safety thanks to the fact we have literal <code>KeyPath</code> objects. KeyPaths also exist in Objective-C, but they aren&rsquo;t as safe.</p></article></div></main><footer><div class=container><div class=footer-navigation><a href=https://github.com/AndyIbanez><span class=inline-svg><svg viewBox="0 0 42 40" id="svg4" width="42" height="40"><path fill="currentColor" d="m14.20936 32.20794c0 .16542-.19024.29776-.4301.29776-.27295.0248-.46319-.10752-.46319-.29776.0-.16542.19024-.29776.4301-.29776.24814-.0248.46319.10752.46319.29776zm-2.57234-.3722c-.0579.16542.10753.35566.35566.40528.21505.0827.46319.0.51282-.16542.0496-.16542-.10753-.35566-.35566-.4301-.21505-.0579-.45492.0248-.51282.19024zm3.65586-.14061c-.23986.0579-.40529.21505-.38047.40528.0248.16543.23986.27295.488.21505.23986-.0579.40528-.21505.38047-.38047-.0248-.15715-.24813-.26468-.488-.23986zM20.73531-.19734273e-6C9.2632-.19734273e-6.48748 8.7095398.48748 20.18166c0 9.17273 5.77328 17.02207 14.01964 19.78464 1.05871.19024 1.43091-.46319 1.43091-1.00081.0-.51282-.0248-3.34156-.0248-5.0785.0.0-5.78982 1.24067-7.00568-2.46481.0.0-.94292-2.40691-2.29939-3.02725.0.0-1.8941-1.29857.13234-1.27376.0.0 2.05952.16542 3.19267 2.13396 1.81139 3.19267 4.84691 2.27457 6.02969 1.72868.19023-1.32339.72786-2.24149 1.32338-2.78739-4.62358-.51281-9.28852-1.18278-9.28852-9.13964.0-2.27458.62861-3.416 1.95199-4.87172-.21505-.53763-.9181-2.7543.21506-5.6161302 1.72867-.53762 5.7071 2.2332202 5.7071 2.2332202 1.65424-.46319 3.43254-.70305 5.1943-.70305 1.76176.0 3.54006.23986 5.1943.70305.0.0 3.97843-2.7791202 5.7071-2.2332202 1.13315 2.8701002.4301 5.0785002.21505 5.6161302 1.32339 1.46399 2.13397 2.60542 2.13397 4.87172.0 7.98168-4.87172 8.61856-9.49531 9.13964.76095.65342 1.4061 1.8941 1.4061 3.83782.0 2.78739-.0248 6.23647-.0248 6.9147.0.53763.38047 1.19105 1.43091 1.00082 8.27117-2.74603 13.87903-10.59537 13.87903-19.7681C41.51252 8.7095398 32.20745-.19734273e-6 20.73533-.19734273e-6zM8.52706 28.52727c-.10752.0827-.0827.27295.0579.4301.13234.13234.32258.19024.4301.0827.10753-.0827.0827-.27295-.0579-.4301-.13233-.13234-.32257-.19024-.4301-.0827zM7.63378 27.8573c-.0579.10753.0248.23987.19023.32258.13234.0827.29777.0579.35566-.0579C8.23757 28.01446 8.15487 27.88212 7.98944 27.7994 7.82401 27.7498 7.69168 27.7746 7.63378 27.8573zm2.67986 2.94454c-.13234.10753-.0827.35566.10752.51281.19024.19024.4301.21505.53763.0827.10752-.10752.0579-.35566-.10753-.51281-.18196-.19024-.4301-.21505-.53762-.0827zM9.37072 29.58598c-.13234.0827-.13234.29776.0.488.13234.19023.35566.27295.46319.19023.13234-.10752.13234-.32257.0-.51281-.1158-.19024-.33085-.27295-.46319-.16542z" id="path2" style="stroke-width:.08271171"/></svg>
</span></a><a href=https://x.com/AndyIbanezK><span class=inline-svg><svg viewBox="0 0 50 40" id="svg4" width="50" height="40"><path fill="currentColor" d="m44.56253 9.96871c.0313.43748.0313.87506.0313 1.31254C44.59383 24.62494 34.43764 40 15.87508 40 10.1563 40 4.84383 38.34368.37506 35.4688c.81253.0937 1.5937.12495 2.4375.12495 4.71867.0 9.06249-1.5937 12.53125-4.31245-4.43751-.0938-8.15627-3.00003-9.43754-7.00006.62505.0937 1.25001.15622 1.90632.15622.90622.0 1.81254-.12505 2.65624-.34369C5.84384 23.15619 2.37498 19.09373 2.37498 14.18748v-.12495c1.3437.75 2.90633 1.21875 4.56246 1.28117-2.71876-1.81253-4.49993-4.90624-4.49993-8.40627.0-1.87497.4999-3.59372 1.37496-5.09373 4.96877 6.125 12.43756 10.12493 20.81248 10.56251-.15622-.75001-.25-1.53118-.25-2.31245C24.37495 4.5312 28.87498.0 34.46871.0c2.90623.0 5.53121 1.21875 7.37501 3.1875 2.28118-.43748 4.46867-1.28127 6.40626-2.43749-.75011 2.3438-2.34381 4.31255-4.43751 5.56246 2.03127-.21864 4.00003-.78126 5.81247-1.56244-1.37477 1.99992-3.09362 3.7811-5.06237 5.21868z" id="path2" style="stroke-width:.09619153"/></svg>
</span></a><a href=https://www.linkedin.com/in/andyibanez/><span class=inline-svg><svg viewBox="0 0 41 40" id="svg4" width="41" height="40"><path fill="currentColor" d="M9.45332 40H1.16028V13.29405H9.45332zM5.30234 9.65111c-2.65185.0-4.80279-2.19648-4.80279-4.84832a4.80279 4.80279.0 019.60558.0c0 2.65184-2.15184 4.84832-4.80279 4.84832zM40.49152 40H32.21633V26.99971c0-3.09828-.0625-7.07159-4.3117-7.07159-4.3117.0-4.97243 3.36615-4.97243 6.84837V40H14.64808V13.29405h7.95375v3.64294h.11608c1.10716-2.09827 3.81169-4.3126 7.8466-4.3126 8.39304.0 9.93594 5.52691 9.93594 12.70564V40z" id="path2" style="stroke-width:.08928771"/></svg>
</span></a><a href=https://www.andyibanez.com/posts/index.xml><span class=inline-svg><svg viewBox="0 0 40 40" id="svg4" width="40" height="40"><path fill="currentColor" d="m11.435816 34.282008c0 3.15793-2.5599899 5.71793-5.7179299 5.71793s-5.717840022654-2.56-5.717840022654-5.71793c0-3.15794 2.559990022654-5.71793 5.717930022654-5.71793s5.7178399 2.56008 5.7178399 5.71793zm15.68388 4.21873C26.373806 24.697208 15.317496 13.626978 1.4992361 12.880288.68361608 12.836188.46077346e-4 13.491538.46077346e-4 14.308318v4.29186c0 .75134.579460002654 1.38142 1.329190022654 1.43017 9.9849699.65036 17.9886099 8.63408 18.6402999 18.6403.0488.74973.67893 1.3292 1.43018 1.3292h4.29186c.81687 9e-5 1.47223-.68348 1.42812-1.49911zm12.87933.0257C39.249566 17.649718 22.452206.754048 1.4735261.00092799867.66727608-.027972.46077346e-4.623338.46077346e-4 1.430038v4.29177c0 .77008.610270002654 1.39687 1.379730022654 1.42848 17.0694999.6999 30.7701699 14.40316 31.4699899 31.46999.0315.76946.6583 1.37972 1.42848 1.37972h4.29177c.8066-8e-5 1.45794-.66731 1.42901-1.47356z" id="path2" style="stroke-width:.08928544"/></svg>
</span></a><a href=https://www.andyibanez.com/contact><span class=inline-svg><svg viewBox="0 0 40 40" id="svg4" width="40" height="40"><path fill="currentColor" d="m39.99999 36.249999c0 2.0711-1.6789 3.75-3.74999 3.75H3.75c-2.07109.0-3.74999-1.6789-3.74999-3.75v-20.56843a3.7499996 3.7499996.0 011.43648-2.95125c1.94633-1.5257 3.55476-2.7628904 12.82812-9.4930404C15.57906 2.2789186 18.18727-.02709136 20 .00024864227 21.81234-.02745136 24.42156 2.2793086 25.73539 3.2371986c9.27242 6.72945 10.88304 7.9683604 12.82812 9.4931204a3.7499996 3.7499996.0 011.43648 2.95125zm-5.13015-15.35976c-.20024-.29125-.60156-.35898-.88586-.14898-1.78476 1.3182-4.33297 3.18008-8.24859 6.02179-1.31445.95828-3.92266 3.26414-5.73539 3.23672-1.81336.0269-4.41867-2.2768-5.73539-3.23672-3.91515-2.8414-6.46359-4.70343-8.24859-6.02179-.2843-.21-.68562-.14227-.88586.14898l-.70875 1.03094a.62484368.62484368.0 00.14367.8568c1.78805 1.32023 4.33235 3.1789 8.2268 6.00531 1.5839 1.15476 4.41593 3.73539 7.20812 3.71664 2.79094.0189 5.62195-2.56024 7.20804-3.71664 3.89453-2.82649 6.43891-4.68516 8.2268-6.00531a.62484368.62484368.0 00.14367-.8568z" id="path2" style="stroke-width:.07812498"/></svg></span></a></div></div><p class=made-with-love><a href=https://github.com/humrochagf/colordrop><b>Colordrop</b>
</a><span>theme | Made </span><span>by</span>
<a href=https://humberto.io/><b>Humberto Rocha</b></a></p></footer></div><script src=/copy/copy.js></script><script src=/search/elasticlunr.min.js></script><script src=/search/search.js></script><script>loadSearch("https://www.andyibanez.com/index.json")</script></body></html>